<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joaquim">
<meta name="dcterms.date" content="2022-12-19">

<title>QuartoEstudo - Teste de funcionalidade Quarto para sítio eletrônico com recursos interativos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.26/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">QuartoEstudo</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dados-de-alertas-de-risco-de-desastres-enviados-pelo-cemaden." id="toc-dados-de-alertas-de-risco-de-desastres-enviados-pelo-cemaden." class="nav-link active" data-scroll-target="#dados-de-alertas-de-risco-de-desastres-enviados-pelo-cemaden.">Dados de alertas de risco de desastres enviados pelo CEMADEN.</a>
  <ul class="collapse">
  <li><a href="#processamento-dos-dados-através-do-r" id="toc-processamento-dos-dados-através-do-r" class="nav-link" data-scroll-target="#processamento-dos-dados-através-do-r">Processamento dos dados através do <em>R</em></a>
  <ul class="collapse">
  <li><a href="#bibliotecas" id="toc-bibliotecas" class="nav-link" data-scroll-target="#bibliotecas">Bibliotecas</a></li>
  <li><a href="#dados" id="toc-dados" class="nav-link" data-scroll-target="#dados">Dados</a></li>
  <li><a href="#agregação" id="toc-agregação" class="nav-link" data-scroll-target="#agregação">Agregação</a></li>
  <li><a href="#processamento" id="toc-processamento" class="nav-link" data-scroll-target="#processamento">Processamento</a></li>
  </ul></li>
  <li><a href="#produção-dos-gráficos-estáticos" id="toc-produção-dos-gráficos-estáticos" class="nav-link" data-scroll-target="#produção-dos-gráficos-estáticos">Produção dos gráficos estáticos</a>
  <ul class="collapse">
  <li><a href="#tema" id="toc-tema" class="nav-link" data-scroll-target="#tema">Tema</a></li>
  <li><a href="#alertas-hidrológicos" id="toc-alertas-hidrológicos" class="nav-link" data-scroll-target="#alertas-hidrológicos">Alertas Hidrológicos</a></li>
  <li><a href="#alertas-geológicos" id="toc-alertas-geológicos" class="nav-link" data-scroll-target="#alertas-geológicos">Alertas Geológicos</a></li>
  <li><a href="#alertas" id="toc-alertas" class="nav-link" data-scroll-target="#alertas">Alertas</a></li>
  </ul></li>
  <li><a href="#interatividade" id="toc-interatividade" class="nav-link" data-scroll-target="#interatividade">Interatividade</a>
  <ul class="collapse">
  <li><a href="#bibliotecas-1" id="toc-bibliotecas-1" class="nav-link" data-scroll-target="#bibliotecas-1">Bibliotecas</a></li>
  <li><a href="#input" id="toc-input" class="nav-link" data-scroll-target="#input">Input</a></li>
  <li><a href="#fonte-de-dados-e-filtragem-revisar" id="toc-fonte-de-dados-e-filtragem-revisar" class="nav-link" data-scroll-target="#fonte-de-dados-e-filtragem-revisar">Fonte de dados e filtragem <strong><em>REVISAR</em></strong></a></li>
  <li><a href="#mapa" id="toc-mapa" class="nav-link" data-scroll-target="#mapa">Mapa</a></li>
  <li><a href="#funções-utilizadas" id="toc-funções-utilizadas" class="nav-link" data-scroll-target="#funções-utilizadas">Funções utilizadas</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Teste de funcionalidade <strong><em>Quarto</em></strong> para sítio eletrônico com recursos interativos</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Joaquim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 19, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="dados-de-alertas-de-risco-de-desastres-enviados-pelo-cemaden." class="level1 page-columns page-full">
<h1>Dados de alertas de risco de desastres enviados pelo CEMADEN.</h1>
<p>A ideia é juntar a divulgação “estática” — com uma breve explanação de um conjunto de variáveis das BATERs relacionadas num tema, com revisão na bibliografia do uso dessas variáveis e outras considerações, analisando os resultados observados na escala nacional e de grandes regiões, podendo citar alguns casos de UF — com uma parte interativa, disponibilizando os dados agregados por UF e município, juntamente com um mapa com as BATERs do município selecionado com as feições <em>clicáveis</em>, abrindo uma caixinha de texto com as informações básicas da BATER e as variáveis da mesma exploradas no tema da publicação.</p>
<section id="processamento-dos-dados-através-do-r" class="level2">
<h2 class="anchored" data-anchor-id="processamento-dos-dados-através-do-r">Processamento dos dados através do <em>R</em></h2>
<section id="bibliotecas" class="level3">
<h3 class="anchored" data-anchor-id="bibliotecas">Bibliotecas</h3>
<p>Carrega as bibliotecas necessárias. São muitas, nesse caso.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clock)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="dados" class="level3">
<h3 class="anchored" data-anchor-id="dados">Dados</h3>
<p>Carrega a tabela do Excel com os dados.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>planilha <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"W:/DGC_ACERVO_CGEO/PROJETOS_EM_ANDAMENTO/Cemaden/BOLSISTAS/Joaquim/AtlasNacional/Alertas/AlertasCemaden2012-2021.xlsx"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># datatable(planilha)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="agregação" class="level3">
<h3 class="anchored" data-anchor-id="agregação">Agregação</h3>
<p>Produz a tabela de total de alertas por município.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Tot_Mun <span class="ot">&lt;-</span> planilha <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Mun =</span> <span class="fu">str_to_upper</span>(<span class="st">`</span><span class="at">Município</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Código IBGE</span><span class="st">`</span>, Mun, <span class="st">`</span><span class="at">Evento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tot_Event =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Evento =</span> <span class="fu">ifelse</span>(Evento <span class="sc">==</span> <span class="st">"Geo/Hidro"</span>, <span class="st">"Hidrogeo"</span>, Evento)) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Evento, <span class="at">values_from =</span> Tot_Event, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tot_geo =</span> Geo <span class="sc">+</span> Hidrogeo, <span class="at">tot_hidro =</span> Hidro <span class="sc">+</span> Hidrogeo) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Código IBGE</span><span class="st">`</span>, Mun, tot_geo, tot_hidro)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(Tot_Mun, <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Geocódigo"</span>, <span class="st">"Município"</span>, <span class="st">"Alertas Geológicos"</span>, <span class="st">"Alertas Hidrológicos"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-a4a5c7b47a211ed14515" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a4a5c7b47a211ed14515">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932"],[1100189,1100205,1200104,1200252,1200328,1200401,1200609,1200708,1300029,1300060,1300086,1300102,1300144,1300201,1300300,1300508,1300607,1300631,1300680,1300706,1300805,1300904,1301001,1301159,1301308,1301407,1301506,1301605,1301654,1301704,1301803,1301852,1301902,1302009,1302108,1302207,1302306,1302405,1302504,1302603,1302702,1303007,1303106,1303304,1303403,1303502,1303536,1303569,1303700,1303809,1303908,1304005,1304062,1304104,1304203,1304237,1304260,1304302,1304401,1400027,1400100,1500107,1500404,1500503,1500602,1500859,1501006,1501204,1501402,1501709,1502152,1502954,1503101,1503507,1503606,1503804,1503903,1504208,1504802,1505106,1505304,1505403,1505536,1505908,1506005,1506161,1506187,1506195,1506807,1507458,1507508,1507805,1507979,1508050,1508100,1600303,1600600,1702109,1702158,1720200,2100436,2100477,2100832,2100907,2100956,2101202,2101301,2101400,2101772,2101806,2102101,2102200,2102325,2102507,2102705,2103000,2103208,2103307,2103406,2103505,2103554,2103604,2103901,2104008,2104206,2104800,2105104,2105153,2105302,2105401,2105450,2105708,2105807,2105906,2105948,2105963,2106300,2106359,2106607,2106631,2106755,2106805,2106904,2107209,2107456,2107506,2107803,2108207,2108306,2108454,2108504,2108702,2108801,2108900,2109106,2109304,2109601,2109759,2109809,2110005,2110104,2110278,2110609,2110807,2111300,2111409,2111508,2111532,2111722,2112100,2112209,2112233,2112274,2112456,2112704,2112803,2112902,2201200,2201507,2201945,2202000,2202208,2202653,2202703,2203701,2203909,2204659,2205805,2206209,2207504,2207702,2208304,2208502,2210052,2211001,2211100,2211209,2300200,2301703,2302107,2302305,2302800,2303709,2303907,2304004,2304103,2304202,2304400,2304707,2305407,2305506,2306207,2307007,2307304,2307502,2307650,2307700,2308104,2308203,2308401,2308708,2308906,2309805,2311405,2311504,2311801,2312908,2313104,2314102,2401008,2402006,2402204,2402600,2403608,2404200,2405603,2407203,2408003,2408102,2409902,2412203,2414407,2414704,2500304,2500502,2501807,2503001,2503209,2504009,2504801,2507507,2509305,2509800,2510808,2511905,2513901,2515302,2516201,2600054,2600401,2600500,2600807,2600906,2601300,2601409,2601508,2601904,2602902,2603108,2603454,2604106,2604205,2604502,2604700,2604809,2605202,2605707,2605905,2606200,2606606,2606804,2607208,2607307,2607604,2607752,2607901,2607950,2608206,2608750,2608800,2609006,2609204,2609402,2609501,2609600,2610004,2610707,2611101,2611309,2611408,2611507,2611606,2611804,2611903,2612000,2612406,2612901,2613701,2614105,2614204,2616308,2616407,2616506,2700607,2701100,2701308,2701357,2702108,2702306,2702702,2703809,2704203,2704302,2704500,2704708,2705101,2705507,2706448,2706604,2707602,2708105,2708303,2708501,2708600,2708907,2709301,2709400,2800308,2804003,2805406,2901106,2903102,2903409,2903904,2904902,2905602,2905800,2906501,2906907,2911204,2911808,2913457,2913606,2914802,2914901,2915304,2915601,2916401,2917102,2917300,2917508,2917607,2918407,2919009,2919157,2919207,2920601,2921104,2921609,2922409,2922508,2923001,2923902,2925303,2925501,2927408,2927705,2928059,2928604,2929008,2930105,2930709,2931202,2932903,2933307,3100609,3101102,3101508,3102308,3104601,3105608,3105707,3106200,3106309,3106408,3106705,3107109,3109006,3109402,3110004,3110806,3112059,3112307,3112901,3113008,3113206,3113305,3113404,3113602,3113701,3114105,3114501,3115300,3115904,3116001,3116100,3117504,3118007,3118304,3118601,3119203,3119401,3121100,3121704,3121803,3121902,3122504,3122603,3122900,3123700,3124005,3124203,3125002,3125804,3126703,3126901,3127701,3128204,3128808,3129004,3129301,3129806,3130903,3131307,3131703,3132107,3132404,3132701,3133006,3133204,3133501,3135076,3135209,3135407,3136207,3136702,3137007,3137536,3137700,3137809,3139201,3139409,3139508,3139607,3140001,3140407,3140605,3140803,3140852,3142205,3143153,3143302,3143708,3143906,3144003,3144300,3144359,3144672,3144805,3145307,3146107,3146305,3147808,3148202,3149903,3149952,3150109,3150802,3151107,3151206,3152105,3152501,3153400,3153509,3153905,3154002,3154150,3154309,3154606,3154804,3154903,3155702,3156205,3156700,3156809,3157807,3159605,3160207,3160702,3161106,3162302,3162500,3162906,3164001,3164100,3165503,3166006,3167509,3168606,3168705,3169307,3169356,3169901,3170404,3171006,3171204,3171303,3171907,3172004,3200102,3200169,3200201,3200300,3200409,3200508,3200607,3200706,3200805,3200904,3201001,3201100,3201159,3201209,3201308,3201407,3201506,3201605,3201704,3201902,3202108,3202207,3202256,3202306,3202405,3202454,3202504,3202553,3202702,3202801,3202900,3203007,3203106,3203130,3203163,3203205,3203304,3203346,3203353,3203403,3203502,3203601,3203700,3203809,3203908,3204005,3204054,3204203,3204252,3204302,3204351,3204401,3204500,3204559,3204609,3204658,3204708,3204807,3204906,3204955,3205002,3205036,3205101,3205150,3205200,3205309,3300100,3300209,3300225,3300308,3300407,3300456,3300506,3300803,3301009,3301108,3301702,3301850,3302205,3302270,3302304,3302502,3302601,3302700,3302809,3302858,3303005,3303203,3303302,3303401,3303500,3303807,3303856,3303906,3304003,3304102,3304144,3304201,3304300,3304409,3304557,3304607,3304706,3304904,3305109,3305158,3305554,3305604,3305703,3305802,3306107,3306305,3500501,3500600,3501152,3501905,3502002,3502507,3502705,3503802,3504107,3504503,3505351,3505401,3506003,3507605,3508405,3508801,3509007,3509254,3509502,3509601,3509700,3509908,3510500,3510609,3511508,3511607,3511706,3512308,3512704,3513009,3513504,3513603,3513801,3514403,3514809,3515004,3515103,3515186,3515509,3516309,3516408,3518305,3518404,3518701,3518800,3519071,3520301,3520400,3520426,3521002,3521200,3522109,3522158,3522208,3522653,3523107,3523305,3523909,3524600,3525003,3525300,3525508,3525904,3526100,3526209,3526902,3527009,3528403,3528502,3529005,3529401,3529906,3530904,3531803,3532009,3534401,3536000,3536208,3536802,3537107,3537206,3537503,3537602,3538204,3540507,3541000,3542602,3542800,3543303,3543402,3543907,3544004,3544103,3545159,3547304,3547809,3548500,3548708,3548807,3549904,3549953,3550308,3550407,3550704,3551009,3551801,3552205,3552403,3552809,3553500,3555406,3556404,3556503,3557006,3557303,4100400,4101200,4101408,4103305,4103602,4104006,4104204,4104253,4104451,4104600,4105201,4105805,4106902,4107652,4108304,4108403,4108502,4109302,4111258,4111555,4112009,4116208,4118204,4118501,4119152,4119509,4121000,4122206,4122305,4125506,4125605,4125704,4127908,4128104,4128203,4200606,4200705,4201109,4201208,4201406,4202008,4202107,4202206,4202404,4202453,4202701,4202800,4202909,4203006,4203204,4203709,4204509,4204558,4204608,4205407,4205456,4205704,4205803,4205902,4206009,4206702,4207106,4207304,4208203,4208302,4208401,4208450,4208500,4208708,4208906,4209003,4209102,4209151,4209300,4210001,4210100,4210407,4210803,4210852,4211207,4211306,4211504,4211603,4211900,4212106,4212502,4212809,4213203,4213302,4213351,4213500,4213609,4214003,4214300,4214508,4214805,4214904,4215000,4215109,4215703,4215802,4216305,4216602,4217402,4217808,4218004,4218103,4218202,4218301,4218707,4218806,4218905,4219200,4219507,4300406,4300570,4301305,4303004,4304200,4304663,4305108,4306205,4306601,4306767,4306809,4307807,4308300,4309605,4310108,4310603,4310652,4311007,4311403,4313409,4314050,4314209,4314407,4314902,4315305,4316006,4316402,4316907,4318408,4318804,4319505,4320008,4320800,4321303,4321451,4321501,4321709,4322400,4322608,5001904,5002704,5003207,5004601,5004700,5005681,5008305,5103353,5103403,5103700,5106216,5106232,5107776,5107800,5200308,5201108,5203104,5205406,5208004,5208905,5211503,5215231,5221601],["PIMENTA BUENO","PORTO VELHO","BRASILÉIA","EPITACIOLÂNDIA","JORDÃO","RIO BRANCO","TARAUACÁ","XAPURI","ALVARÃES","AMATURÁ","ANAMÃ","ANORI","APUÍ","ATALAIA DO NORTE","AUTAZES","BARREIRINHA","BENJAMIN CONSTANT","BERURI","BOA VISTA DO RAMOS","BOCA DO ACRE","BORBA","CANUTAMA","CARAUARI","CAREIRO DA VÁRZEA","CODAJÁS","EIRUNEPÉ","ENVIRA","FONTE BOA","GUAJARÁ","HUMAITÁ","IPIXUNA","IRANDUBA","ITACOATIARA","ITAPIRANGA","JAPURÁ","JURUÁ","JUTAÍ","LÁBREA","MANACAPURU","MANAUS","MANICORÉ","NHAMUNDÁ","NOVA OLINDA DO NORTE","NOVO ARIPUANÃ","PARINTINS","PAUINI","PRESIDENTE FIGUEIREDO","RIO PRETO DA EVA","SANTO ANTÔNIO DO IÇÁ","SÃO GABRIEL DA CACHOEIRA","SÃO PAULO DE OLIVENÇA","SILVES","TABATINGA","TAPAUÁ","TEFÉ","TONANTINS","UARINI","URUCARÁ","URUCURITUBA","AMAJARI","BOA VISTA","ABAETETUBA","ALENQUER","ALMEIRIM","ALTAMIRA","ANAPU","AVEIRO","BAIÃO","BELÉM","BRAGANÇA","CANAÃ DOS CARAJÁS","ELDORADO DOS CARAJÁS","GURUPÁ","IRITUIA","ITAITUBA","JACUNDÁ","JURUTI","MARABÁ","MONTE ALEGRE","ÓBIDOS","ORIXIMINÁ","OURÉM","PARAUAPEBAS","PORTO DE MOZ","PRAINHA","RIO MARIA","RONDON DO PARÁ","RURÓPOLIS","SANTARÉM","SÃO GERALDO DO ARAGUAIA","SÃO JOÃO DO ARAGUAIA","SENADOR JOSÉ PORFÍRIO","TERRA SANTA","TRAIRÃO","TUCURUÍ","MACAPÁ","SANTANA","ARAGUAÍNA","ARAGUANÃ","SÃO MIGUEL DO TOCANTINS","ALTO ALEGRE DO MARANHÃO","ALTO ALEGRE DO PINDARÉ","APICUM-AÇU","ARAIOSES","ARAME","BACABAL","BACURI","BALSAS","BELA VISTA DO MARANHÃO","BENEDITO LEITE","BREJO","BURITI","BURITICUPU","CAJARI","CANTANHEDE","CAXIAS","CHAPADINHA","CODÓ","COELHO NETO","COLINAS","CONCEIÇÃO DO LAGO-AÇU","COROATÁ","DUQUE BACELAR","ESPERANTINÓPOLIS","FORTUNA","GRAJAÚ","ICATU","IGARAPÉ DO MEIO","IMPERATRIZ","ITAPECURU MIRIM","JATOBÁ","LAGO DA PEDRA","LAGO DO JUNCO","LAGO VERDE","LAGO DOS RODRIGUES","LAGOA GRANDE DO MARANHÃO","MAGALHÃES DE ALMEIDA","MARAJÁ DO SENA","MATÕES","MATÕES DO NORTE","MIRANDA DO NORTE","MIRINZAL","MONÇÃO","NINA RODRIGUES","OLINDA NOVA DO MARANHÃO","PAÇO DO LUMIAR","PARNARAMA","PEDREIRAS","PENALVA","PERITORÓ","PINDARÉ-MIRIM","PIO XII","PIRAPEMAS","POÇÃO DE PEDRAS","PRESIDENTE DUTRA","PRESIDENTE VARGAS","ROSÁRIO","SANTA FILOMENA DO MARANHÃO","SANTA HELENA","SANTA LUZIA","SANTA QUITÉRIA DO MARANHÃO","SANTO AMARO DO MARANHÃO","SÃO BERNARDO","SÃO FÉLIX DE BALSAS","SÃO LUÍS","SÃO LUÍS GONZAGA DO MARANHÃO","SÃO MATEUS DO MARANHÃO","SÃO PEDRO DA ÁGUA BRANCA","SATUBINHA","TIMBIRAS","TIMON","TRIZIDELA DO VALE","TUFILÂNDIA","TURILÂNDIA","VARGEM GRANDE","VIANA","VITÓRIA DO MEARIM","BARRAS","BATALHA","BOQUEIRÃO DO PIAUÍ","BURITI DOS LOPES","CAMPO MAIOR","CAXINGÓ","COCAL","ESPERANTINA","FLORIANO","ILHA GRANDE","LUZILÂNDIA","MIGUEL ALVES","PALMEIRAIS","PARNAÍBA","PIRACURUCA","PORTO","SÃO JOSÉ DO DIVINO","TERESINA","UNIÃO","URUÇUÍ","ACARAÚ","AURORA","BATURITÉ","BELA CRUZ","CANINDÉ","CAUCAIA","CHAVAL","COREAÚ","CRATEÚS","CRATO","FORTALEZA","GRANJA","ICÓ","IGUATU","ITAIÇABA","JAGUARUANA","JUAZEIRO DO NORTE","LAVRAS DA MANGABEIRA","MARACANAÚ","MARANGUAPE","MAURITI","MERUOCA","MISSÃO VELHA","MORADA NOVA","MORRINHOS","PACOTI","QUIXERAMOBIM","QUIXERÉ","RUSSAS","SOBRAL","TABULEIRO DO NORTE","VIÇOSA DO CEARÁ","APODI","CAICÓ","CANGUARETAMA","CEARÁ-MIRIM","EXTREMOZ","GOIANINHA","JARDIM DE PIRANHAS","MACAU","MOSSORÓ","NATAL","PENDÊNCIAS","SÃO JOSÉ DE MIPIBU","TOUROS","VÁRZEA","ALAGOA GRANDE","ALAGOINHA","BAYEUX","CAAPORÃ","CABEDELO","CAMPINA GRANDE","COREMAS","JOÃO PESSOA","MATARACA","MULUNGU","PATOS","PITIMBU","SÃO BENTO","SAPÉ","SOUSA","ABREU E LIMA","ÁGUA PRETA","ÁGUAS BELAS","ALTINHO","AMARAJI","BARRA DE GUABIRABA","BARREIROS","BELÉM DE MARIA","BEZERROS","CABO DE SANTO AGOSTINHO","CACHOEIRINHA","CAMARAGIBE","CARUARU","CATENDE","CHÃ GRANDE","CORRENTES","CORTÊS","ESCADA","FLORESTA","GAMELEIRA","GOIANA","IBIMIRIM","IGARASSU","IPOJUCA","IPUBI","ILHA DE ITAMARACÁ","ITAPISSUMA","JABOATÃO DOS GUARARAPES","JAQUEIRA","JOAQUIM NABUCO","LAGOA GRANDE","LAJEDO","MACAPARANA","MARAIAL","MORENO","NAZARÉ DA MATA","OLINDA","PALMARES","PAULISTA","PETROLINA","POMBOS","PRIMAVERA","QUIPAPÁ","RECIFE","RIBEIRÃO","RIO FORMOSO","SAIRÉ","SANHARÓ","SÃO BENEDITO DO SUL","SÃO LOURENÇO DA MATA","SERTÂNIA","SIRINHAÉM","VICÊNCIA","VITÓRIA DE SANTO ANTÃO","XEXÉU","BARRA DE SÃO MIGUEL","BRANQUINHA","CAJUEIRO","CAMPESTRE","COLÔNIA LEOPOLDINA","CORURIPE","FELIZ DESERTO","JOAQUIM GOMES","LIMOEIRO DE ANADIA","MACEIÓ","MARAGOGI","MARECHAL DEODORO","MATRIZ DE CAMARAGIBE","MURICI","PARIPUEIRA","PAULO JACINTO","QUEBRANGULO","SANTANA DO MUNDAÚ","SÃO JOSÉ DA LAJE","SÃO LUÍS DO QUITUNDE","SÃO MIGUEL DOS CAMPOS","SATUBA","UNIÃO DOS PALMARES","VIÇOSA","ARACAJU","MARUIM","POÇO REDONDO","AMÉLIA RODRIGUES","BARRA DO ROCHA","BELMONTE","BOM JESUS DA LAPA","CACHOEIRA","CAMACAN","CAMAMU","CANDEIAS","CARAVELAS","GANDU","GUARATINGA","IGRAPIÚNA","ILHÉUS","ITABUNA","ITACARÉ","ITAGIMIRIM","ITAMARAJU","ITAPETINGA","ITORORÓ","ITUBERÁ","JACOBINA","JAGUAQUARA","JUAZEIRO","LAJEDINHO","LAPÃO","LAURO DE FREITAS","MARAGOGIPE","MEDEIROS NETO","MORPARÁ","MUTUÍPE","NAZARÉ","NOVA VIÇOSA","PAU BRASIL","PORTO SEGURO","PRADO","SALVADOR","SANTA CRUZ CABRÁLIA","SANTA LUZIA","SANTO AMARO","SÃO FÉLIX","SENHOR DO BONFIM","SIMÕES FILHO","TAPEROÁ","VALENÇA","VITÓRIA DA CONQUISTA","ÁGUA BOA","AIMORÉS","ALÉM PARAÍBA","ALVINÓPOLIS","ASTOLFO DUTRA","BARBACENA","BARRA LONGA","BELO HORIZONTE","BELO ORIENTE","BELO VALE","BETIM","BOA ESPERANÇA","BRUMADINHO","BURITIZEIRO","CAETÉ","CAMPANÁRIO","CANTAGALO","CAPELINHA","CAPUTIRA","CARAÍ","CARANDAÍ","CARANGOLA","CARATINGA","CAREAÇU","CARLOS CHAGAS","CARMO DE MINAS","CARMÓPOLIS DE MINAS","CATAGUASES","CHÁCARA","CHALÉ","CHAPADA DO NORTE","CONCEIÇÃO DO MATO DENTRO","CONGONHAS","CONSELHEIRO LAFAIETE","CONTAGEM","COROACI","CORONEL FABRICIANO","DELFIM MOREIRA","DIOGO DE VASCONCELOS","DIONÍSIO","DIVINÉSIA","DOM CAVATI","DOM JOAQUIM","DONA EUSÉBIA","ENGENHEIRO CALDAS","ERVÁLIA","ESPERA FELIZ","EWBANK DA CÂMARA","FERNANDES TOURINHO","FRANCISCO SÁ","FREI INOCÊNCIO","GOVERNADOR VALADARES","GUARACIABA","GUIDOVAL","GUIRICEMA","IAPU","IBIRITÉ","INHAPIM","IPATINGA","ITABIRA","ITACARAMBI","ITAJUBÁ","ITAMBACURI","ITAMONTE","ITANHOMI","ITAPECERICA","JAMPRUCA","JANUÁRIA","JECEABA","JOÃO MONLEVADE","JUIZ DE FORA","LADAINHA","LAGOA GRANDE","LAJINHA","LAMBARI","MALACACHETA","MANHUAÇU","MANHUMIRIM","MANTENA","MARIANA","MARMELÓPOLIS","MATERLÂNDIA","MATIAS BARBOSA","MATIAS CARDOSO","MIRAÍ","MONTE FORMOSO","MONTES CLAROS","MORRO DO PILAR","MURIAÉ","MUTUM","NANUQUE","NAQUE","NOVA BELÉM","NOVA LIMA","NOVO CRUZEIRO","OURO PRETO","PADRE PARAÍSO","PASSA-VINTE","PATROCÍNIO DO MURIAÉ","PERDÕES","PERIQUITO","PIAU","PIRANGA","PIRAPETINGA","PIRAPORA","PONTE NOVA","POUSO ALEGRE","PRESIDENTE OLEGÁRIO","ALTO JEQUITIBÁ","RAPOSOS","RAUL SOARES","REDUTO","RESPLENDOR","RIBEIRÃO DAS NEVES","RIO ACIMA","RIO CASCA","RIO PIRACICABA","ROCHEDO DE MINAS","SABARÁ","SABINÓPOLIS","SANTA LUZIA","SANTA RITA DO SAPUCAÍ","SANTO ANTÔNIO DO ITAMBÉ","SANTOS DUMONT","SÃO FRANCISCO","SÃO JOÃO DA MATA","SÃO JOÃO DEL REI","SÃO JOÃO NEPOMUCENO","SÃO PEDRO DOS FERROS","SÃO PEDRO DO SUAÇUÍ","SARDOÁ","SENHORA DE OLIVEIRA","SIMÃO PEREIRA","TEÓFILO OTONI","TIMÓTEO","TRÊS CORAÇÕES","TRÊS MARIAS","UBÁ","UNAÍ","VAZANTE","VESPASIANO","VIÇOSA","VIRGOLÂNDIA","VISCONDE DO RIO BRANCO","AFONSO CLÁUDIO","ÁGUA DOCE DO NORTE","ALEGRE","ALFREDO CHAVES","ANCHIETA","APIACÁ","ARACRUZ","ATILIO VIVACQUA","BAIXO GUANDU","BARRA DE SÃO FRANCISCO","BOA ESPERANÇA","BOM JESUS DO NORTE","BREJETUBA","CACHOEIRO DE ITAPEMIRIM","CARIACICA","CASTELO","COLATINA","CONCEIÇÃO DA BARRA","CONCEIÇÃO DO CASTELO","DOMINGOS MARTINS","ECOPORANGA","FUNDÃO","GOVERNADOR LINDENBERG","GUAÇUÍ","GUARAPARI","IBATIBA","IBIRAÇU","IBITIRAMA","ITAGUAÇU","ITAPEMIRIM","ITARANA","IÚNA","JERÔNIMO MONTEIRO","JOÃO NEIVA","LARANJA DA TERRA","LINHARES","MANTENÓPOLIS","MARECHAL FLORIANO","MARILÂNDIA","MIMOSO DO SUL","MONTANHA","MUCURICI","MUNIZ FREIRE","MUQUI","NOVA VENÉCIA","PANCAS","PEDRO CANÁRIO","PIÚMA","PONTO BELO","PRESIDENTE KENNEDY","RIO BANANAL","RIO NOVO DO SUL","SANTA LEOPOLDINA","SANTA MARIA DE JETIBÁ","SANTA TERESA","SÃO DOMINGOS DO NORTE","SÃO GABRIEL DA PALHA","SÃO JOSÉ DO CALÇADO","SÃO MATEUS","SÃO ROQUE DO CANAÃ","SERRA","VARGEM ALTA","VIANA","VILA PAVÃO","VILA VELHA","VITÓRIA","ANGRA DOS REIS","ARARUAMA","AREAL","BARRA DO PIRAÍ","BARRA MANSA","BELFORD ROXO","BOM JARDIM","CACHOEIRAS DE MACACU","CAMPOS DOS GOYTACAZES","CANTAGALO","DUQUE DE CAXIAS","GUAPIMIRIM","ITAPERUNA","JAPERI","LAJE DO MURIAÉ","MAGÉ","MANGARATIBA","MARICÁ","MENDES","MESQUITA","MIRACEMA","NILÓPOLIS","NITERÓI","NOVA FRIBURGO","NOVA IGUAÇU","PARATY","PATY DO ALFERES","PETRÓPOLIS","PIRAÍ","PORCIÚNCULA","QUEIMADOS","RESENDE","RIO BONITO","RIO CLARO","RIO DE JANEIRO","SANTA MARIA MADALENA","SANTO ANTÔNIO DE PÁDUA","SÃO GONÇALO","SÃO JOÃO DE MERITI","SÃO JOSÉ DO VALE DO RIO PRETO","SEROPÉDICA","SILVA JARDIM","SUMIDOURO","TERESÓPOLIS","VALENÇA","VOLTA REDONDA","ÁGUAS DE LINDÓIA","ÁGUAS DE SÃO PEDRO","ALUMÍNIO","AMPARO","ANALÂNDIA","APARECIDA","APIAÍ","ARTUR NOGUEIRA","ATIBAIA","AVARÉ","BARRA DO CHAPÉU","BARRA DO TURVO","BAURU","BRAGANÇA PAULISTA","CABREÚVA","CAFELÂNDIA","CAIEIRAS","CAJATI","CAMPINAS","CAMPO LIMPO PAULISTA","CAMPOS DO JORDÃO","CANANÉIA","CARAGUATATUBA","CARAPICUÍBA","CERQUILHO","CESÁRIO LANGE","CHARQUEADA","CONCHAS","CORUMBATAÍ","COTIA","CUBATÃO","CUNHA","DIADEMA","DRACENA","ELDORADO","EMBU DAS ARTES","EMBU-GUAÇU","ESPÍRITO SANTO DO PINHAL","FERNANDÓPOLIS","FRANCISCO MORATO","FRANCO DA ROCHA","GUARAREMA","GUARATINGUETÁ","GUARUJÁ","GUARULHOS","HORTOLÂNDIA","IGUAPE","ILHABELA","ILHA COMPRIDA","IPERÓ","IPORANGA","ITANHAÉM","ITAÓCA","ITAPECERICA DA SERRA","ITAPIRAPUÃ PAULISTA","ITAQUAQUECETUBA","ITARIRI","ITU","JACUPIRANGA","JANDIRA","JAÚ","JOANÓPOLIS","JUNDIAÍ","JUQUIÁ","JUQUITIBA","LIMEIRA","LINDÓIA","MAIRINQUE","MAIRIPORÃ","MARÍLIA","MAUÁ","MIRACATU","MOMBUCA","MONTE MOR","MORUNGABA","OSASCO","PARAPUÃ","PARIQUERA-AÇU","PEDRA BELA","PEDREIRA","PEDRO DE TOLEDO","PEREIRAS","PERUÍBE","PINHALZINHO","PORANGABA","PRAIA GRANDE","REGISTRO","RIBEIRA","RIBEIRÃO PIRES","RIBEIRÃO PRETO","RIO CLARO","RIO DAS PEDRAS","RIO GRANDE DA SERRA","SALTINHO","SANTANA DE PARNAÍBA","SANTO ANDRÉ","SANTOS","SÃO BERNARDO DO CAMPO","SÃO CAETANO DO SUL","SÃO JOSÉ DOS CAMPOS","SÃO LOURENÇO DA SERRA","SÃO PAULO","SÃO PEDRO","SÃO SEBASTIÃO","SÃO VICENTE","SETE BARRAS","SOROCABA","SUMARÉ","TABOÃO DA SERRA","TAPIRAÍ","UBATUBA","VARGEM GRANDE DO SUL","VÁRZEA PAULISTA","VOTORANTIM","ESTIVA GERBI","ALMIRANTE TAMANDARÉ","ANTONINA","APUCARANA","BORRAZÓPOLIS","CAMBARÁ","CAMPINA GRANDE DO SUL","CAMPO LARGO","CAMPO MAGRO","CANTAGALO","CAPITÃO LEÔNIDAS MARQUES","CERRO AZUL","COLOMBO","CURITIBA","FAZENDA RIO GRANDE","FOZ DO IGUAÇU","FRANCISCO BELTRÃO","GENERAL CARNEIRO","GUARANIAÇU","ITAPERUÇU","IVATÉ","JAGUARIAÍVA","MORRETES","PARANAGUÁ","PATO BRANCO","PINHAIS","PIRAQUARA","QUERÊNCIA DO NORTE","RIO BRANCO DO SUL","RIO NEGRO","SÃO JOSÉ DOS PINHAIS","SÃO MATEUS DO SUL","SÃO MIGUEL DO IGUAÇU","TUNEIRAS DO OESTE","UMUARAMA","UNIÃO DA VITÓRIA","ÁGUAS MORNAS","ALFREDO WAGNER","ANITÁPOLIS","ANTÔNIO CARLOS","ARARANGUÁ","BALNEÁRIO CAMBORIÚ","BARRA VELHA","BENEDITO NOVO","BLUMENAU","BOMBINHAS","BOTUVERÁ","BRAÇO DO NORTE","BRUSQUE","CAÇADOR","CAMBORIÚ","CANELINHA","CORUPÁ","CORREIA PINTO","CRICIÚMA","FLORIANÓPOLIS","FORQUILHINHA","GAROPABA","GARUVA","GASPAR","GOVERNADOR CELSO RAMOS","HERVAL D'OESTE","ILHOTA","IMBITUBA","ITAJAÍ","ITAPEMA","ITAPIRANGA","ITAPOÁ","ITUPORANGA","JACINTO MACHADO","JARAGUÁ DO SUL","JOAÇABA","JOINVILLE","JOSÉ BOITEUX","LAGES","LUIZ ALVES","MAFRA","MARACAJÁ","MELEIRO","MIRIM DOCE","MORRO DA FUMAÇA","NAVEGANTES","NOVA TRENTO","NOVA VENEZA","PALHOÇA","PALMITOS","PENHA","BALNEÁRIO PIÇARRAS","POMERODE","PONTE ALTA","PONTE ALTA DO NORTE","PORTO BELO","PORTO UNIÃO","PRESIDENTE GETÚLIO","RANCHO QUEIMADO","RIO DO CAMPO","RIO DO SUL","RIO FORTUNA","RIO NEGRINHO","RODEIO","SANTO AMARO DA IMPERATRIZ","SÃO BENTO DO SUL","SÃO JOÃO BATISTA","SÃO JOSÉ","SCHROEDER","TAIÓ","TIJUCAS","TIMBÉ DO SUL","TIMBÓ","TRÊS BARRAS","TUBARÃO","TURVO","URUBICI","VIDAL RAMOS","XANXERÊ","ALEGRETE","ALTO FELIZ","ARROIO GRANDE","CACHOEIRA DO SUL","CANDELÁRIA","CAPÃO DO LEÃO","CAXIAS DO SUL","CRUZEIRO DO SUL","DOM PEDRITO","ELDORADO DO SUL","ENCANTADO","ESTRELA","FONTOURA XAVIER","HORIZONTINA","IGREJINHA","ITAQUI","ITATI","JAGUARÃO","LAJEADO","NOVO HAMBURGO","PAROBÉ","PEDRO OSÓRIO","PELOTAS","PORTO ALEGRE","QUARAÍ","ROLANTE","ROSÁRIO DO SUL","SANTA MARIA","SÃO JERÔNIMO","SÃO LOURENÇO DO SUL","SÃO SEBASTIÃO DO CAÍ","SAPUCAIA DO SUL","SOLEDADE","TAQUARI","TEUTÔNIA","TORRES","TRÊS COROAS","URUGUAIANA","VENÂNCIO AIRES","BATAGUASSU","CAMPO GRANDE","CORUMBÁ","ITAQUIRAÍ","IVINHEMA","MUNDO NOVO","TRÊS LAGOAS","CONFRESA","CUIABÁ","FELIZ NATAL","NOVA CANAÃ DO NORTE","NOVA OLÍMPIA","SANTA TEREZINHA","SANTO ANTÔNIO DO LEVERGER","ALEXÂNIA","ANÁPOLIS","BALIZA","CERES","FORMOSA","GOIÁS","ITUMBIARA","NOVO GAMA","URUAÇU"],[0,4,2,0,0,3,0,0,1,1,0,0,3,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,2,5,0,5,1,0,0,0,0,0,13,176,1,0,0,0,2,0,4,3,0,1,2,1,2,0,3,1,0,0,0,0,1,4,5,2,3,1,0,3,10,3,3,1,0,4,2,0,9,14,11,2,1,1,20,0,0,0,1,2,15,0,0,0,0,1,4,15,0,5,0,3,0,0,0,0,6,0,0,0,0,0,0,4,9,0,0,16,12,11,5,0,0,0,0,2,0,1,0,0,0,0,0,7,3,0,5,1,0,1,0,0,0,0,0,0,0,1,4,2,0,7,0,0,0,3,0,0,0,0,0,2,1,0,0,0,52,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,19,5,1,0,0,2,0,0,1,0,0,0,5,36,0,0,0,0,0,0,0,1,8,0,1,0,0,0,1,0,0,0,0,1,6,0,0,15,0,0,0,0,0,0,46,0,0,0,0,2,2,21,0,0,1,0,55,9,0,0,20,0,5,0,37,9,0,0,4,3,39,0,0,67,0,54,4,8,7,0,11,21,0,20,21,0,39,50,2,7,0,96,2,9,0,0,0,3,22,5,80,9,52,0,0,8,3,112,13,36,1,0,1,41,0,23,2,7,8,10,1,1,9,2,10,4,3,0,52,26,11,13,0,22,0,0,1,3,14,7,11,0,5,21,8,0,1,1,7,0,4,14,13,39,0,2,5,17,35,20,11,3,7,8,8,7,4,11,0,0,3,67,12,5,0,1,7,1,2,50,5,160,31,2,17,4,6,42,8,16,6,9,8,5,7,15,31,2,44,10,2,49,0,32,0,23,7,5,8,6,7,29,23,19,5,8,3,3,34,10,16,4,15,13,36,34,7,25,4,7,1,12,12,10,10,15,12,17,17,15,0,6,25,7,12,10,16,32,11,33,42,0,11,6,1,15,2,2,0,0,33,74,6,0,23,9,11,23,12,14,35,2,7,27,0,10,2,13,10,32,13,6,11,6,33,10,40,2,7,2,0,12,7,17,3,0,10,7,11,5,17,15,10,10,42,13,12,11,6,32,11,32,5,6,30,0,3,17,9,15,7,6,15,3,13,28,5,3,22,1,3,20,29,4,20,25,20,10,23,20,8,24,5,6,16,0,12,9,19,37,22,19,1,12,13,10,30,14,12,24,15,21,7,15,6,8,9,9,23,13,10,6,13,7,11,1,0,3,8,17,10,1,12,0,3,14,18,26,23,15,9,1,4,9,11,45,12,39,3,36,43,129,0,8,0,2,31,9,28,0,8,0,1,1,0,1,2,52,1,1,1,1,0,30,66,1,1,1,127,0,1,1,2,1,1,85,4,0,1,31,8,1,2,16,87,1,1,17,2,7,14,0,0,15,3,25,5,12,8,4,17,14,1,1,10,16,0,43,7,58,12,0,0,6,0,0,1,67,11,26,1,11,7,18,6,2,30,1,16,0,14,27,0,8,2,3,3,11,23,3,16,9,22,15,8,7,9,0,4,2,9,10,6,10,14,18,9,37,5,0,0,1,0,2,4,5,12,10,1,23,4,1,39,10,5,1,0,0,2,23,0,23,45,60,51,0,34,4,69,5,3,1,8,23,6,32,5,93,0,0,10,2,22,30,3,0,0,0,8,5,0,9,3,0,16,2,11,10,5,14,3,0,4,20,20,10,10,0,0,12,2,0,0,0,0,11,8,21,16,7,26,14,36,10,15,87,19,14,4,44,4,36,14,17,1,26,50,1,32,28,31,33,7,29,14,43,22,11,0,17,13,49,6,46,8,24,29,7,5,7,5,9,4,23,18,39,14,13,14,39,1,4,17,8,10,7,18,21,7,8,16,20,6,19,40,23,15,17,20,26,2,17,4,12,10,13,0,6,0,5,0,0,24,13,0,0,14,2,13,0,20,0,8,0,16,18,6,0,0,23,0,11,0,35,5,0,0,14,8,0,12,7,17,0,0,2,1,8,1,0,0,1,0,8,0,2,1,2,0,1,3,0,1,6,4,0,8,0],[1,9,6,1,1,18,5,7,5,3,4,4,2,3,2,3,2,5,1,2,2,4,3,3,3,4,4,2,9,7,6,5,5,3,1,3,2,4,5,113,3,3,2,2,5,3,0,0,3,0,3,3,3,3,5,3,2,4,4,1,5,2,5,5,5,1,1,3,80,1,1,5,1,5,2,2,7,21,7,7,5,1,19,4,5,6,0,2,15,1,4,1,3,1,5,22,12,13,1,4,1,2,5,5,1,10,2,7,2,3,4,4,0,2,6,11,4,11,7,1,4,2,4,0,1,0,2,3,11,5,1,3,3,1,0,0,2,2,5,4,3,3,2,5,4,3,3,4,2,2,2,2,6,3,2,5,4,1,3,0,4,1,2,1,51,6,2,1,1,5,7,4,1,2,7,2,1,3,8,1,5,5,4,1,4,2,6,6,4,2,11,1,3,4,30,3,5,1,1,1,1,2,26,3,2,3,18,50,5,4,3,1,2,11,2,11,1,1,1,2,2,1,0,2,2,2,9,0,1,1,4,9,5,1,5,1,1,5,28,1,2,3,1,1,1,12,9,14,6,1,43,4,1,7,2,2,2,6,3,5,2,1,3,1,11,2,2,11,1,7,8,3,0,3,3,5,3,5,6,1,5,10,1,1,1,19,1,0,1,1,1,0,6,1,17,4,9,4,1,3,2,30,4,6,0,1,5,8,1,9,1,2,4,2,3,1,4,1,1,1,2,4,29,3,6,4,7,2,2,2,2,3,2,6,5,5,2,20,5,1,2,5,2,1,5,3,5,12,7,2,6,6,13,9,5,4,3,9,5,5,6,5,3,6,1,31,4,5,1,2,5,18,3,14,5,49,10,8,8,5,3,24,3,7,13,4,5,4,4,6,22,0,129,5,5,44,2,13,3,17,3,4,1,2,4,5,16,11,5,8,5,2,14,3,8,1,5,7,15,44,2,10,4,2,0,2,8,1,8,6,7,7,9,2,5,1,18,3,9,2,8,16,8,18,26,2,14,4,3,9,5,0,2,3,16,75,0,1,11,5,1,11,3,3,10,0,1,20,1,5,1,14,2,27,6,8,4,2,27,4,27,0,8,19,4,2,1,5,3,4,6,21,4,4,8,10,2,5,52,6,9,10,3,30,0,30,12,2,16,2,3,11,5,5,4,1,2,3,9,9,6,1,18,5,1,9,19,1,10,11,4,13,15,9,7,16,6,6,8,5,6,4,13,17,13,10,2,10,3,7,14,8,12,10,7,6,2,5,5,4,4,7,9,4,13,3,6,4,4,0,2,3,9,13,8,1,4,1,1,11,6,8,9,3,6,3,9,8,1,36,7,15,4,19,22,78,1,5,1,1,49,5,18,1,3,3,0,2,1,1,2,14,1,0,3,1,2,36,81,4,0,0,215,1,1,2,1,0,2,104,1,3,2,53,5,2,1,10,87,1,1,13,6,2,23,10,1,10,21,59,27,4,6,64,49,13,9,3,4,114,1,35,5,47,22,4,4,3,7,4,0,41,18,43,3,11,17,15,7,3,42,2,22,1,7,125,2,16,2,1,6,6,31,4,14,4,58,8,19,10,18,1,3,3,2,4,39,7,3,45,24,35,5,4,14,2,3,6,6,3,10,7,5,26,10,5,29,16,11,2,3,1,6,10,1,17,87,46,101,1,59,6,370,9,1,1,17,61,35,41,2,57,5,2,16,6,8,5,3,3,1,2,4,4,1,23,7,7,33,0,19,25,4,6,3,5,4,6,11,18,10,11,7,6,8,13,2,18,8,13,14,9,5,3,11,10,19,6,4,44,13,8,4,25,6,29,5,11,7,24,29,7,8,15,22,5,3,20,4,35,11,5,6,8,10,36,5,34,1,16,11,8,3,7,2,6,17,9,7,18,13,11,8,16,3,2,12,6,8,3,2,17,5,5,5,10,2,8,21,16,14,9,9,21,5,12,8,5,5,14,33,1,1,24,11,5,10,20,32,15,15,19,2,14,21,20,13,8,19,27,13,3,27,62,27,18,19,49,10,16,31,20,0,14,12,9,19,19,19,2,65,12,5,2,3,2,2,23,1,0,4,0,1,4,11,1,2,6,0,6,2,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Geocódigo<\/th>\n      <th>Município<\/th>\n      <th>Alertas Geológicos<\/th>\n      <th>Alertas Hidrológicos<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="processamento" class="level3">
<h3 class="anchored" data-anchor-id="processamento">Processamento</h3>
<p>Calcula as médias mensais por grande região e país e junta tudo numa mesma tabela, <em>Med_Geral</em>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Med_GdReg_data <span class="ot">&lt;-</span> planilha <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dataref =</span> <span class="fu">date_group</span>(<span class="fu">as.Date</span>(planilha<span class="sc">$</span>Data), <span class="st">"month"</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">mes =</span> <span class="fu">factor</span>(<span class="fu">date_format</span>(dataref, <span class="at">format =</span> <span class="st">"%m"</span>), </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Fev"</span>, <span class="st">"Mar"</span>, <span class="st">"Abr"</span>, <span class="st">"Mai"</span>, <span class="st">"Jun"</span>, <span class="st">"Jul"</span>, <span class="st">"Ago"</span>, <span class="st">"Set"</span>, <span class="st">"Out"</span>, <span class="st">"Nov"</span>, <span class="st">"Dez"</span>)),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">GdReg =</span> <span class="fu">factor</span>(<span class="fu">as.numeric</span>(<span class="fu">substr</span>(<span class="st">`</span><span class="at">Código IBGE</span><span class="st">`</span>, <span class="dv">1</span>, <span class="dv">1</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"N"</span>, <span class="st">"NE"</span>, <span class="st">"SE"</span>, <span class="st">"S"</span>, <span class="st">"CO"</span>)),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">geologico =</span> <span class="fu">ifelse</span>(Evento <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Geo"</span>, <span class="st">"Geo/Hidro"</span>), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">hidrologico =</span> <span class="fu">ifelse</span>(Evento <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Hidro"</span>, <span class="st">"Geo/Hidro"</span>), <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GdReg, mes, dataref) <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tot_Event =</span> <span class="fu">n</span>(), <span class="at">Tot_geo =</span> <span class="fu">sum</span>(geologico), <span class="at">Tot_hidro =</span> <span class="fu">sum</span>(hidrologico)) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GdReg, mes) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Media_geo =</span> <span class="fu">mean</span>(Tot_geo), <span class="at">Media_hidro =</span> <span class="fu">mean</span>(Tot_hidro), <span class="at">Media_Event =</span> <span class="fu">mean</span>(Tot_Event)) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># manobra esquisita para arrumar a tabela, rever esse código adiante de pivotagem</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Media_"</span>), <span class="at">names_to =</span> <span class="st">"Tipo"</span>, <span class="at">values_to =</span> <span class="st">"Media"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"Tipo"</span>), <span class="at">values_from =</span> Media, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">!</span>GdReg, <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"Tipo"</span>), <span class="at">names_pattern =</span> <span class="st">"(.*)_Media_(.*)"</span>, <span class="at">values_to =</span> <span class="st">"Media"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># até aqui.</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Tipo, mes) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">factor</span>(mes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Fev"</span>, <span class="st">"Mar"</span>, <span class="st">"Abr"</span>, <span class="st">"Mai"</span>, <span class="st">"Jun"</span>, <span class="st">"Jul"</span>, <span class="st">"Ago"</span>, <span class="st">"Set"</span>, <span class="st">"Out"</span>, <span class="st">"Nov"</span>, <span class="st">"Dez"</span>)))</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>Med_Pais_geral <span class="ot">&lt;-</span> Med_GdReg_data <span class="sc">%&gt;%</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Tipo, mes) <span class="sc">%&gt;%</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Media =</span> <span class="fu">sum</span>(Media)) <span class="sc">%&gt;%</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GdReg =</span> <span class="st">"Brasil"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GdReg, mes, Tipo, Media)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>Med_Geral <span class="ot">&lt;-</span> Med_GdReg_data <span class="sc">%&gt;%</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(Med_Pais_geral) <span class="sc">%&gt;%</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GdReg =</span> <span class="fu">factor</span>(GdReg, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Brasil"</span>, <span class="st">"N"</span>, <span class="st">"NE"</span>, <span class="st">"SE"</span>, <span class="st">"S"</span>, <span class="st">"CO"</span>)))</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>Med_Geral <span class="sc">%&gt;%</span> </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Tipo <span class="sc">==</span> <span class="st">"Event"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Media =</span> <span class="fu">round</span>(Media, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> GdReg, <span class="at">names_from =</span> mes, <span class="at">values_from =</span> Media) <span class="sc">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-54eb5091a8a637a10d20" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-54eb5091a8a637a10d20">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["N","NE","SE","S","CO","Brasil"],[13.88,26.5,225.11,70.56,4.17,340.21],[21.5,28.12,198.33,45.56,2.83,296.35],[20.11,65,137.78,39.44,3.14,265.48],[16.22,79,31.4,10.2,4.67,141.49],[12.75,52.8,13.4,24.3,1,104.25],[2.71,47.44,17.8,32.7,0,100.66],[2,32,8.43,29.75,2,74.18],[2.5,10.9,6,8.11,1,28.51],[2.83,8.75,15.12,27.7,1.67,56.08],[6.33,9.62,45.6,44,4.25,109.81],[10.33,20.7,140.6,27.9,4.5,204.03],[12.75,33.33,198,43.5,5.11,292.69]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>GdReg<\/th>\n      <th>Jan<\/th>\n      <th>Fev<\/th>\n      <th>Mar<\/th>\n      <th>Abr<\/th>\n      <th>Mai<\/th>\n      <th>Jun<\/th>\n      <th>Jul<\/th>\n      <th>Ago<\/th>\n      <th>Set<\/th>\n      <th>Out<\/th>\n      <th>Nov<\/th>\n      <th>Dez<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11,12,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="produção-dos-gráficos-estáticos" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="produção-dos-gráficos-estáticos">Produção dos gráficos estáticos</h2>
<section id="tema" class="level3">
<h3 class="anchored" data-anchor-id="tema">Tema</h3>
<p>Carrega configurações de tema para os gráficos, desenvolvido pro Atlas Nacional Digital.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_opts</span>(<span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add</span>(<span class="at">family =</span> <span class="st">"univers"</span>, <span class="at">regular =</span> <span class="st">"C:/Windows/Fonts/univer.TTF"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_igray</span>() <span class="sc">+</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"univers"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">lineheight =</span> <span class="fl">1.1</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="dv">12</span>, <span class="dv">0</span>, <span class="dv">12</span>, <span class="dv">0</span>)),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"univers"</span>, <span class="at">face =</span> <span class="st">"plain"</span>, <span class="at">size =</span> <span class="dv">9</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">5</span>)),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#d0cece"</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">0</span>, <span class="at">r =</span> <span class="dv">40</span>, <span class="at">b =</span> <span class="dv">0</span>, <span class="at">l =</span> <span class="dv">10</span> ),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"univers"</span>, <span class="at">face =</span> <span class="st">"plain"</span>, <span class="at">size =</span> <span class="dv">9</span>),</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"univers"</span>, <span class="at">face =</span> <span class="st">"plain"</span>, <span class="at">size =</span> <span class="dv">7</span>)))</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>cores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#000000"</span>, <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Set1"</span>))</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cores) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Brasil"</span>, <span class="fu">levels</span>(Med_GdReg_data<span class="sc">$</span>GdReg))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>colScale <span class="ot">&lt;-</span> <span class="fu">scale_color_manual</span>(<span class="at">name =</span> <span class="st">"GdReg"</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Brasil"</span>, <span class="st">"Norte"</span>, <span class="st">"Nordeste"</span>, <span class="st">"Sudeste"</span>, <span class="st">"Sul"</span>, <span class="st">"Centro-Oeste"</span>), <span class="at">values =</span> cores)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>lineScale <span class="ot">&lt;-</span> <span class="fu">scale_linetype_manual</span>(<span class="at">name =</span> <span class="st">"GdReg"</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Brasil"</span>, <span class="st">"Norte"</span>, <span class="st">"Nordeste"</span>, <span class="st">"Sudeste"</span>, <span class="st">"Sul"</span>, <span class="st">"Centro-Oeste"</span>), <span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="alertas-hidrológicos" class="level3">
<h3 class="anchored" data-anchor-id="alertas-hidrológicos">Alertas Hidrológicos</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>graf_hidro <span class="ot">&lt;-</span> Med_Geral <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Tipo <span class="sc">==</span> <span class="st">"hidro"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> Media, <span class="at">colour =</span> GdReg, <span class="at">group =</span> GdReg, <span class="at">linetype =</span> GdReg)) <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">size =</span> <span class="fl">0.8</span>, ) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Média mensal de alertas de risco hidrológico,</span><span class="sc">\n</span><span class="st">por Grandes Regiões - 2012-2021"</span>) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Mês"</span>) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Alertas"</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  lineScale <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  colScale <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">0</span>, <span class="dv">40</span>))</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>graf_hidro</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-hidro" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-hidro-1.png" class="img-fluid figure-img" width="480"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Hidrológico</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="alertas-geológicos" class="level3">
<h3 class="anchored" data-anchor-id="alertas-geológicos">Alertas Geológicos</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>graf_geo <span class="ot">&lt;-</span> Med_Geral <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Tipo <span class="sc">==</span> <span class="st">"geo"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> Media, <span class="at">colour =</span> GdReg, <span class="at">group =</span> GdReg, <span class="at">linetype =</span> GdReg)) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">size =</span> <span class="fl">0.8</span>, ) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Média mensal de alertas de risco geológico,</span><span class="sc">\n</span><span class="st">por Grandes Regiões - 2012-2021"</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Mês"</span>) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Alertas"</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  lineScale <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  colScale <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">0</span>, <span class="dv">40</span>))</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>graf_geo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-geo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-geo-1.png" class="img-fluid figure-img" width="480"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Geológico</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="alertas" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="alertas">Alertas</h3>
<p>Ainda tenho que ver como definir o tamanho individual das figuras. Por enquanto tá definido globalmente, no início do documento, e em polegadas, eca.</p>
<div class="cell page-columns page-full">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>graf_geral <span class="ot">&lt;-</span> Med_Geral <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Tipo <span class="sc">==</span> <span class="st">"Event"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(GdReg) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> Media, <span class="at">colour =</span> GdReg, <span class="at">group =</span> GdReg, <span class="at">linetype =</span> GdReg)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Média mensal de alertas de risco geohidrológico,</span><span class="sc">\n</span><span class="st">por Grandes Regiões - 2012-2021"</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Mês"</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Alertas"</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  lineScale <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  colScale <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">0</span>, <span class="dv">40</span>)) <span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(GdReg), <span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>graf_geral</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-screen">
<div id="fig-geral" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-geral-1.png" class="img-fluid figure-img" width="1152"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Geral</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Dá pra referenciar as imagens no texto, <a href="#fig-hidro">Figure&nbsp;1</a>, <a href="#fig-geo">Figure&nbsp;2</a> e <a href="#fig-geral">Figure&nbsp;3</a>.</p>
</section>
</section>
<section id="interatividade" class="level2">
<h2 class="anchored" data-anchor-id="interatividade">Interatividade</h2>
<p>Existem muitas possibilidades de interatividade, em tabelas, gráficos e mapas. Teste primeiramente a produção de mapas, que me parece mais complexa. Para obter a interatividade rodando direto do navegador, deve-se utilizar o <a href="https://observablehq.com/"><strong>Observable</strong></a>. Infelizmente o <em>proxy</em> do IBGE bloqueia! Vou pedir pra DI liberar depois.</p>
<section id="bibliotecas-1" class="level3">
<h3 class="anchored" data-anchor-id="bibliotecas-1">Bibliotecas</h3>
<p>Carrega a biblioteca <em>bertin.js</em> para a produção de mapas</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" data-startfrom="211" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 210;"><span id="cb9-211"><a href="#cb9-211" aria-hidden="true" tabindex="-1"></a>bertin <span class="op">=</span> <span class="pp">require</span>(<span class="st">"bertin@1"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="input" class="level3">
<h3 class="anchored" data-anchor-id="input">Input</h3>
<p>Aqui é criado a caixinha de seleção do município. O ideal é fazer um de UF antes pra reduzir a lista resultante. Depois eu faço, na camada WFS das BATERs não tem a sigla da UF, só o geocódigo, mais difícil de escolher a UF né. Só botar uma tabelinha com isso e fazer o join que resolve.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" data-startfrom="221" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 220;"><span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a>viewof selNomUF <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>    listaUF<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nm_uf</span>)<span class="op">,</span> </span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>        <span class="dt">label</span><span class="op">:</span> <span class="st">"Unidade da Federação"</span></span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>viewof selNomMunic <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a>    MunicUF<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nommunic</span>)<span class="op">,</span></span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a>        <span class="dt">label</span><span class="op">:</span> <span class="st">"Município"</span></span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="fonte-de-dados-e-filtragem-revisar" class="level3">
<h3 class="anchored" data-anchor-id="fonte-de-dados-e-filtragem-revisar">Fonte de dados e filtragem <strong><em>REVISAR</em></strong></h3>
<p>Carrega o JSON servido pelo serviço WFS do geoserver do IBGE. Ver <a href="https://geoservicos.ibge.gov.br/geoserver/web/wicket/bookmarkable/org.geoserver.web.demo.MapPreviewPage?1&amp;filter=false">aqui</a> a lista de serviços disponibilizada pelo IBGE. Tem bastante coisa! No caso das BATERs, elas já vêm com os variáveis da publicação, além da geometria. A grande vantagem de usar o serviço wfs é não precisar manter as camadas espaciais que forem utilizadas na parte interativa no repositório do site, economizando muito espaço de armazenamento. As feições são filtradas segundo o município selecionado. O correto na verdade é aplicar o filtro antes de requisitar a camada wfs pra diminuir o tráfego de dados. Do jeito que está demora para carregar inicialmente o mapa, tem todo o tempo de recebimento da camada completa wfs do IBGE. Depois eu vejo como fazer.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" data-startfrom="244" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 243;"><span id="cb11-244"><a href="#cb11-244" aria-hidden="true" tabindex="-1"></a>urlWFS <span class="op">=</span> <span class="st">"https://geoservicos.ibge.gov.br/geoserver/ows"</span><span class="op">;</span></span>
<span id="cb11-245"><a href="#cb11-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-246"><a href="#cb11-246" aria-hidden="true" tabindex="-1"></a>listaUF <span class="op">=</span> <span class="cf">await</span> <span class="fu">wfsRequest</span>(urlWFS<span class="op">,</span> <span class="st">"GetFeature"</span><span class="op">,</span> {</span>
<span id="cb11-247"><a href="#cb11-247" aria-hidden="true" tabindex="-1"></a>  <span class="dt">service</span><span class="op">:</span> <span class="st">"WFS"</span><span class="op">,</span></span>
<span id="cb11-248"><a href="#cb11-248" aria-hidden="true" tabindex="-1"></a>  <span class="dt">version</span><span class="op">:</span> <span class="st">"2.0.0"</span><span class="op">,</span></span>
<span id="cb11-249"><a href="#cb11-249" aria-hidden="true" tabindex="-1"></a>  <span class="dt">typeNames</span><span class="op">:</span> <span class="st">"CGMAT:pbqg22_02_Estado_NomUF"</span><span class="op">,</span></span>
<span id="cb11-250"><a href="#cb11-250" aria-hidden="true" tabindex="-1"></a>  <span class="dt">PropertyName</span><span class="op">:</span> <span class="st">"cd_uf,nm_uf"</span><span class="op">,</span></span>
<span id="cb11-251"><a href="#cb11-251" aria-hidden="true" tabindex="-1"></a>  <span class="dt">outputFormat</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb11-252"><a href="#cb11-252" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb11-253"><a href="#cb11-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-254"><a href="#cb11-254" aria-hidden="true" tabindex="-1"></a>geo_uf <span class="op">=</span> <span class="cf">await</span> <span class="fu">wfsRequest</span>(urlWFS<span class="op">,</span> <span class="st">"GetFeature"</span><span class="op">,</span> {</span>
<span id="cb11-255"><a href="#cb11-255" aria-hidden="true" tabindex="-1"></a>  <span class="dt">service</span><span class="op">:</span> <span class="st">"WFS"</span><span class="op">,</span></span>
<span id="cb11-256"><a href="#cb11-256" aria-hidden="true" tabindex="-1"></a>  <span class="dt">version</span><span class="op">:</span> <span class="st">"2.0.0"</span><span class="op">,</span></span>
<span id="cb11-257"><a href="#cb11-257" aria-hidden="true" tabindex="-1"></a>  <span class="dt">typeNames</span><span class="op">:</span> <span class="st">"CGMAT:pbqg22_02_Estado_NomUF"</span><span class="op">,</span></span>
<span id="cb11-258"><a href="#cb11-258" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cql_filter</span><span class="op">:</span> <span class="vs">`nm_uf='</span><span class="sc">${</span>selNomUF<span class="sc">}</span><span class="vs">'`</span><span class="op">,</span></span>
<span id="cb11-259"><a href="#cb11-259" aria-hidden="true" tabindex="-1"></a>  <span class="dt">outputFormat</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb11-260"><a href="#cb11-260" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb11-261"><a href="#cb11-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-262"><a href="#cb11-262" aria-hidden="true" tabindex="-1"></a>MunicUF <span class="op">=</span> <span class="cf">await</span> <span class="fu">wfsRequest</span>(urlWFS<span class="op">,</span> <span class="st">"GetFeature"</span><span class="op">,</span> {</span>
<span id="cb11-263"><a href="#cb11-263" aria-hidden="true" tabindex="-1"></a>  <span class="dt">service</span><span class="op">:</span> <span class="st">"WFS"</span><span class="op">,</span></span>
<span id="cb11-264"><a href="#cb11-264" aria-hidden="true" tabindex="-1"></a>  <span class="dt">version</span><span class="op">:</span> <span class="st">"2.0.0"</span><span class="op">,</span></span>
<span id="cb11-265"><a href="#cb11-265" aria-hidden="true" tabindex="-1"></a>  <span class="dt">typeNames</span><span class="op">:</span> <span class="st">"CGEO:PARBR2018_Municipios_mapeados"</span><span class="op">,</span></span>
<span id="cb11-266"><a href="#cb11-266" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cql_filter</span><span class="op">:</span> <span class="vs">`uf='</span><span class="sc">${</span>selUF<span class="sc">}</span><span class="vs">'`</span><span class="op">,</span></span>
<span id="cb11-267"><a href="#cb11-267" aria-hidden="true" tabindex="-1"></a>  <span class="dt">outputFormat</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb11-268"><a href="#cb11-268" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb11-269"><a href="#cb11-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-270"><a href="#cb11-270" aria-hidden="true" tabindex="-1"></a>bater <span class="op">=</span> <span class="cf">await</span> <span class="fu">wfsRequest</span>(urlWFS<span class="op">,</span> <span class="st">"GetFeature"</span><span class="op">,</span> {</span>
<span id="cb11-271"><a href="#cb11-271" aria-hidden="true" tabindex="-1"></a>  <span class="dt">service</span><span class="op">:</span> <span class="st">"WFS"</span><span class="op">,</span></span>
<span id="cb11-272"><a href="#cb11-272" aria-hidden="true" tabindex="-1"></a>  <span class="dt">version</span><span class="op">:</span> <span class="st">"2.0.0"</span><span class="op">,</span></span>
<span id="cb11-273"><a href="#cb11-273" aria-hidden="true" tabindex="-1"></a>  <span class="dt">typeNames</span><span class="op">:</span> <span class="st">"CGEO:PARBR2018_BATER_MD"</span><span class="op">,</span></span>
<span id="cb11-274"><a href="#cb11-274" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cql_filter</span><span class="op">:</span> <span class="vs">`geo_mun='</span><span class="sc">${</span>selCdMunic<span class="sc">}</span><span class="vs">'`</span><span class="op">,</span></span>
<span id="cb11-275"><a href="#cb11-275" aria-hidden="true" tabindex="-1"></a>  <span class="dt">outputFormat</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb11-276"><a href="#cb11-276" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb11-277"><a href="#cb11-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-278"><a href="#cb11-278" aria-hidden="true" tabindex="-1"></a>selUF <span class="op">=</span> <span class="fu">stripAccents</span>(selNomUF)<span class="op">;</span></span>
<span id="cb11-279"><a href="#cb11-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-280"><a href="#cb11-280" aria-hidden="true" tabindex="-1"></a>selCdMunic <span class="op">=</span> MunicUF<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nommunic</span> <span class="op">===</span> selNomMunic)[<span class="dv">0</span>]<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">codmunic</span><span class="op">;</span></span>
<span id="cb11-281"><a href="#cb11-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-282"><a href="#cb11-282" aria-hidden="true" tabindex="-1"></a>selMunicArray <span class="op">=</span> MunicUF<span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nommunic</span> <span class="op">==</span> selNomMunic)<span class="op">;</span></span>
<span id="cb11-283"><a href="#cb11-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-284"><a href="#cb11-284" aria-hidden="true" tabindex="-1"></a>selMunic <span class="op">=</span> ({</span>
<span id="cb11-285"><a href="#cb11-285" aria-hidden="true" tabindex="-1"></a>  <span class="st">"type"</span><span class="op">:</span><span class="st">"FeatureCollection"</span><span class="op">,</span></span>
<span id="cb11-286"><a href="#cb11-286" aria-hidden="true" tabindex="-1"></a>  <span class="st">"features"</span><span class="op">:</span>selMunicArray  </span>
<span id="cb11-287"><a href="#cb11-287" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-9" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="mapa" class="level3">
<h3 class="anchored" data-anchor-id="mapa">Mapa</h3>
<p>Aqui produz o mapa com as BATERs do município selecionado. A biblioteca <a href="https://observablehq.com/collection/@neocartocnrs/bertin"><em>bertin</em></a> é mais pra produzir cartogramas, não dá pra “passear” pelo mapa. Mas pode-se fazer, por exemplo, janelinhas <em>pop up</em> com os dados da BATER que aparecem ao clicar na mesma. Existem outras bibliotecas para trabalhar com mapas, a <a href="https://observablehq.com/@observablehq/plot"><em>plot</em></a> que é parecida com a <em>bertin</em>, e algumas de mapas mesmo, <a href="https://observablehq.com/@mbostock/hello-openlayers"><em>openlayer</em></a>, <a href="https://observablehq.com/@tmcw/leaflet"><em>leaflet</em></a> e <a href="https://observablehq.com/@tmcw/using-mapbox-gl-js"><em>mapbox</em></a>. Devo utilizar no final a a <em>openlayer</em> ou a <em>leaflet</em>.</p>
<p>Além de mapas, dá pra produzir as tabelas interativas (a pessoa pode filtrar por qualquer campo, por exemplo, e ordenar por qualquer coluna) e gráficos também. E tudo isso rodando no navegador, sem precisar de um servidor com interpretador de <em>R</em> ou <em>Python</em> instalados, com as bibliotecas como <a href="https://shiny.rstudio.com/"><em>Shiny</em></a> ou <a href="https://dash.plotly.com/"><em>Dash</em></a> nas versões certas e dispor de tempo de processador para processar as ações de todos os usuários simultâneos… O servidor só precisa servir o site, e nada mais.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" data-startfrom="299" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 298;"><span id="cb12-299"><a href="#cb12-299" aria-hidden="true" tabindex="-1"></a>mapauf <span class="op">=</span> bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb12-300"><a href="#cb12-300" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span><span class="op">:</span> { <span class="dt">background</span><span class="op">:</span> <span class="st">"#bde1f0"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">10</span> }<span class="op">,</span></span>
<span id="cb12-301"><a href="#cb12-301" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span><span class="op">:</span> [{</span>
<span id="cb12-302"><a href="#cb12-302" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"layer"</span><span class="op">,</span></span>
<span id="cb12-303"><a href="#cb12-303" aria-hidden="true" tabindex="-1"></a>      <span class="dt">geojson</span><span class="op">:</span> selMunic<span class="op">,</span></span>
<span id="cb12-304"><a href="#cb12-304" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"#000000"</span><span class="op">,</span>      </span>
<span id="cb12-305"><a href="#cb12-305" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.8</span><span class="op">,</span></span>
<span id="cb12-306"><a href="#cb12-306" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#000000"</span><span class="op">,</span></span>
<span id="cb12-307"><a href="#cb12-307" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb12-308"><a href="#cb12-308" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol</span><span class="op">:</span> <span class="st">"square"</span><span class="op">,</span></span>
<span id="cb12-309"><a href="#cb12-309" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol_size</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb12-310"><a href="#cb12-310" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb12-311"><a href="#cb12-311" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-312"><a href="#cb12-312" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"layer"</span><span class="op">,</span></span>
<span id="cb12-313"><a href="#cb12-313" aria-hidden="true" tabindex="-1"></a>      <span class="dt">geojson</span><span class="op">:</span> MunicUF<span class="op">.</span><span class="at">data</span><span class="op">,</span></span>
<span id="cb12-314"><a href="#cb12-314" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ff0000"</span><span class="op">,</span></span>
<span id="cb12-315"><a href="#cb12-315" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span></span>
<span id="cb12-316"><a href="#cb12-316" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#ff0000"</span><span class="op">,</span></span>
<span id="cb12-317"><a href="#cb12-317" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb12-318"><a href="#cb12-318" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol</span><span class="op">:</span> <span class="st">"square"</span><span class="op">,</span></span>
<span id="cb12-319"><a href="#cb12-319" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol_size</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb12-320"><a href="#cb12-320" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb12-321"><a href="#cb12-321" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-322"><a href="#cb12-322" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"layer"</span><span class="op">,</span></span>
<span id="cb12-323"><a href="#cb12-323" aria-hidden="true" tabindex="-1"></a>      <span class="dt">geojson</span><span class="op">:</span> geo_uf<span class="op">.</span><span class="at">data</span><span class="op">,</span></span>
<span id="cb12-324"><a href="#cb12-324" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"#999999"</span><span class="op">,</span>      </span>
<span id="cb12-325"><a href="#cb12-325" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span></span>
<span id="cb12-326"><a href="#cb12-326" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#777777"</span><span class="op">,</span></span>
<span id="cb12-327"><a href="#cb12-327" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb12-328"><a href="#cb12-328" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol</span><span class="op">:</span> <span class="st">"square"</span><span class="op">,</span></span>
<span id="cb12-329"><a href="#cb12-329" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol_size</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb12-330"><a href="#cb12-330" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb12-331"><a href="#cb12-331" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-332"><a href="#cb12-332" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"tiles"</span><span class="op">,</span></span>
<span id="cb12-333"><a href="#cb12-333" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb12-334"><a href="#cb12-334" aria-hidden="true" tabindex="-1"></a>      <span class="dt">style</span><span class="op">:</span> <span class="st">"openstreetmap"</span><span class="op">,</span></span>
<span id="cb12-335"><a href="#cb12-335" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-336"><a href="#cb12-336" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb12-337"><a href="#cb12-337" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb12-338"><a href="#cb12-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-339"><a href="#cb12-339" aria-hidden="true" tabindex="-1"></a>mapamunic <span class="op">=</span> bertin<span class="op">.</span><span class="fu">draw</span>({</span>
<span id="cb12-340"><a href="#cb12-340" aria-hidden="true" tabindex="-1"></a>  <span class="dt">params</span><span class="op">:</span> { <span class="dt">background</span><span class="op">:</span> <span class="st">"#bde1f0"</span><span class="op">,</span> <span class="dt">margin</span><span class="op">:</span> <span class="dv">10</span> }<span class="op">,</span></span>
<span id="cb12-341"><a href="#cb12-341" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layers</span><span class="op">:</span> [{</span>
<span id="cb12-342"><a href="#cb12-342" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"layer"</span><span class="op">,</span></span>
<span id="cb12-343"><a href="#cb12-343" aria-hidden="true" tabindex="-1"></a>      <span class="dt">geojson</span><span class="op">:</span> bater<span class="op">.</span><span class="at">data</span><span class="op">,</span></span>
<span id="cb12-344"><a href="#cb12-344" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"#ff0000"</span><span class="op">,</span></span>
<span id="cb12-345"><a href="#cb12-345" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span></span>
<span id="cb12-346"><a href="#cb12-346" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#ff0000"</span><span class="op">,</span></span>
<span id="cb12-347"><a href="#cb12-347" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb12-348"><a href="#cb12-348" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol</span><span class="op">:</span> <span class="st">"square"</span><span class="op">,</span></span>
<span id="cb12-349"><a href="#cb12-349" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol_size</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb12-350"><a href="#cb12-350" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb12-351"><a href="#cb12-351" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-352"><a href="#cb12-352" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"layer"</span><span class="op">,</span></span>
<span id="cb12-353"><a href="#cb12-353" aria-hidden="true" tabindex="-1"></a>      <span class="dt">geojson</span><span class="op">:</span> selMunic<span class="op">,</span></span>
<span id="cb12-354"><a href="#cb12-354" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"#999999"</span><span class="op">,</span>      </span>
<span id="cb12-355"><a href="#cb12-355" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.25</span><span class="op">,</span></span>
<span id="cb12-356"><a href="#cb12-356" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#777777"</span><span class="op">,</span></span>
<span id="cb12-357"><a href="#cb12-357" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb12-358"><a href="#cb12-358" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol</span><span class="op">:</span> <span class="st">"square"</span><span class="op">,</span></span>
<span id="cb12-359"><a href="#cb12-359" aria-hidden="true" tabindex="-1"></a>      <span class="dt">symbol_size</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb12-360"><a href="#cb12-360" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb12-361"><a href="#cb12-361" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb12-362"><a href="#cb12-362" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"tiles"</span><span class="op">,</span></span>
<span id="cb12-363"><a href="#cb12-363" aria-hidden="true" tabindex="-1"></a>      <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb12-364"><a href="#cb12-364" aria-hidden="true" tabindex="-1"></a>      <span class="dt">style</span><span class="op">:</span> <span class="st">"openstreetmap"</span><span class="op">,</span></span>
<span id="cb12-365"><a href="#cb12-365" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-366"><a href="#cb12-366" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb12-367"><a href="#cb12-367" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="funções-utilizadas" class="level3">
<h3 class="anchored" data-anchor-id="funções-utilizadas">Funções utilizadas</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" data-startfrom="376" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 375;"><span id="cb13-376"><a href="#cb13-376" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">wfsRequest</span>(</span>
<span id="cb13-377"><a href="#cb13-377" aria-hidden="true" tabindex="-1"></a>  url<span class="op">,</span></span>
<span id="cb13-378"><a href="#cb13-378" aria-hidden="true" tabindex="-1"></a>  operation <span class="op">=</span> <span class="st">"GetCapabilities"</span><span class="op">,</span></span>
<span id="cb13-379"><a href="#cb13-379" aria-hidden="true" tabindex="-1"></a>  extraParameters <span class="op">=</span> {}</span>
<span id="cb13-380"><a href="#cb13-380" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb13-381"><a href="#cb13-381" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> queryParameters <span class="op">=</span> <span class="kw">new</span> <span class="fu">URLSearchParams</span>({</span>
<span id="cb13-382"><a href="#cb13-382" aria-hidden="true" tabindex="-1"></a>    <span class="dt">request</span><span class="op">:</span> operation<span class="op">,</span></span>
<span id="cb13-383"><a href="#cb13-383" aria-hidden="true" tabindex="-1"></a>    <span class="dt">service</span><span class="op">:</span> <span class="st">"WFS"</span><span class="op">,</span></span>
<span id="cb13-384"><a href="#cb13-384" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>extraParameters</span>
<span id="cb13-385"><a href="#cb13-385" aria-hidden="true" tabindex="-1"></a>  })<span class="op">.</span><span class="fu">toString</span>()<span class="op">;</span></span>
<span id="cb13-386"><a href="#cb13-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-387"><a href="#cb13-387" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(queryParameters)<span class="op">;</span></span>
<span id="cb13-388"><a href="#cb13-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-389"><a href="#cb13-389" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>url<span class="sc">}</span><span class="vs">?</span><span class="sc">${</span>queryParameters<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb13-390"><a href="#cb13-390" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> responseFormat <span class="op">=</span> response<span class="op">.</span><span class="at">headers</span><span class="op">.</span><span class="fu">get</span>(<span class="st">"Content-Type"</span>)<span class="op">;</span></span>
<span id="cb13-391"><a href="#cb13-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-392"><a href="#cb13-392" aria-hidden="true" tabindex="-1"></a>  <span class="co">// If the WFS server returns Content-Type header containing "json" it will read the data as json, otherwise as text.</span></span>
<span id="cb13-393"><a href="#cb13-393" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> responseFormat<span class="op">.</span><span class="fu">includes</span>(<span class="st">"json"</span>)</span>
<span id="cb13-394"><a href="#cb13-394" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb13-395"><a href="#cb13-395" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">text</span>()<span class="op">;</span></span>
<span id="cb13-396"><a href="#cb13-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-397"><a href="#cb13-397" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb13-398"><a href="#cb13-398" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span> data<span class="op">,</span></span>
<span id="cb13-399"><a href="#cb13-399" aria-hidden="true" tabindex="-1"></a>    <span class="dt">status</span><span class="op">:</span> response<span class="op">.</span><span class="at">status</span></span>
<span id="cb13-400"><a href="#cb13-400" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb13-401"><a href="#cb13-401" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb13-402"><a href="#cb13-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-403"><a href="#cb13-403" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">stripAccents</span>(str) {</span>
<span id="cb13-404"><a href="#cb13-404" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> reAccents <span class="op">=</span> <span class="ss">/</span><span class="sc">[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]</span><span class="ss">/g</span><span class="op">;</span></span>
<span id="cb13-405"><a href="#cb13-405" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> replacements <span class="op">=</span> <span class="st">'aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY'</span><span class="op">;</span></span>
<span id="cb13-406"><a href="#cb13-406" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">.</span><span class="fu">replace</span>(reAccents<span class="op">,</span> <span class="kw">function</span> (match) {</span>
<span id="cb13-407"><a href="#cb13-407" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> replacements[reAccents<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="fu">indexOf</span>(match)]<span class="op">;</span></span>
<span id="cb13-408"><a href="#cb13-408" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb13-409"><a href="#cb13-409" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"\nbertin = require(\"bertin@1\");\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\nviewof selNomUF = Inputs.select(\n    listaUF.data.features.map((d) => d.properties.nm_uf), \n    {\n        label: \"Unidade da Federação\"\n    }\n);\n\nviewof selNomMunic = Inputs.select(\n    MunicUF.data.features.map((d) => d.properties.nommunic),\n    {\n        label: \"Município\"\n    }\n)\n\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"\nurlWFS = \"https://geoservicos.ibge.gov.br/geoserver/ows\";\n\nlistaUF = await wfsRequest(urlWFS, \"GetFeature\", {\n  service: \"WFS\",\n  version: \"2.0.0\",\n  typeNames: \"CGMAT:pbqg22_02_Estado_NomUF\",\n  PropertyName: \"cd_uf,nm_uf\",\n  outputFormat: \"application/json\"\n});\n\ngeo_uf = await wfsRequest(urlWFS, \"GetFeature\", {\n  service: \"WFS\",\n  version: \"2.0.0\",\n  typeNames: \"CGMAT:pbqg22_02_Estado_NomUF\",\n  cql_filter: `nm_uf='${selNomUF}'`,\n  outputFormat: \"application/json\"\n});\n\nMunicUF = await wfsRequest(urlWFS, \"GetFeature\", {\n  service: \"WFS\",\n  version: \"2.0.0\",\n  typeNames: \"CGEO:PARBR2018_Municipios_mapeados\",\n  cql_filter: `uf='${selUF}'`,\n  outputFormat: \"application/json\"\n});\n\nbater = await wfsRequest(urlWFS, \"GetFeature\", {\n  service: \"WFS\",\n  version: \"2.0.0\",\n  typeNames: \"CGEO:PARBR2018_BATER_MD\",\n  cql_filter: `geo_mun='${selCdMunic}'`,\n  outputFormat: \"application/json\"\n});\n\nselUF = stripAccents(selNomUF);\n\nselCdMunic = MunicUF.data.features.filter((d) => d.properties.nommunic === selNomMunic)[0].properties.codmunic;\n\nselMunicArray = MunicUF.data.features.filter((d) => d.properties.nommunic == selNomMunic);\n\nselMunic = ({\n  \"type\":\"FeatureCollection\",\n  \"features\":selMunicArray  \n});\n\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"\nmapauf = bertin.draw({\n  params: { background: \"#bde1f0\", margin: 10 },\n  layers: [{\n      type: \"layer\",\n      geojson: selMunic,\n      fill: \"#000000\",      \n      fillOpacity: 0.8,\n      stroke: \"#000000\",\n      strokeWidth: 2,\n      symbol: \"square\",\n      symbol_size: 50\n    },\n    {\n      type: \"layer\",\n      geojson: MunicUF.data,\n      fill: \"#ff0000\",\n      fillOpacity: 0.6,\n      stroke: \"#ff0000\",\n      strokeWidth: 1,\n      symbol: \"square\",\n      symbol_size: 50\n    },\n    {\n      type: \"layer\",\n      geojson: geo_uf.data,\n      fill: \"#999999\",      \n      fillOpacity: 0.25,\n      stroke: \"#777777\",\n      strokeWidth: 2,\n      symbol: \"square\",\n      symbol_size: 50\n    },\n    {\n      type: \"tiles\",\n      opacity: 1,\n      style: \"openstreetmap\",\n    }\n  ]\n});\n\nmapamunic = bertin.draw({\n  params: { background: \"#bde1f0\", margin: 10 },\n  layers: [{\n      type: \"layer\",\n      geojson: bater.data,\n      fill: \"#ff0000\",\n      fillOpacity: 0.6,\n      stroke: \"#ff0000\",\n      strokeWidth: 1,\n      symbol: \"square\",\n      symbol_size: 50\n    },\n    {\n      type: \"layer\",\n      geojson: selMunic,\n      fill: \"#999999\",      \n      fillOpacity: 0.25,\n      stroke: \"#777777\",\n      strokeWidth: 2,\n      symbol: \"square\",\n      symbol_size: 50\n    },\n    {\n      type: \"tiles\",\n      opacity: 1,\n      style: \"openstreetmap\",\n    }\n  ]\n});\n\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"\nasync function wfsRequest(\n  url,\n  operation = \"GetCapabilities\",\n  extraParameters = {}\n) {\n  const queryParameters = new URLSearchParams({\n    request: operation,\n    service: \"WFS\",\n    ...extraParameters\n  }).toString();\n\n  console.log(queryParameters);\n\n  const response = await fetch(`${url}?${queryParameters}`);\n  const responseFormat = response.headers.get(\"Content-Type\");\n\n  // If the WFS server returns Content-Type header containing \"json\" it will read the data as json, otherwise as text.\n  const data = responseFormat.includes(\"json\")\n    ? await response.json()\n    : await response.text();\n\n  return {\n    data: data,\n    status: response.status\n  };\n};\n\nfunction stripAccents(str) {\n    var reAccents = /[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g;\n    var replacements = 'aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY';\n    return str.replace(reAccents, function (match) {\n        return replacements[reAccents.source.indexOf(match)];\n    });\n};\n\n"},{"methodName":"interpretQuiet","source":"shinyInput('selNomUF')"},{"methodName":"interpretQuiet","source":"shinyInput('selNomMunic')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>